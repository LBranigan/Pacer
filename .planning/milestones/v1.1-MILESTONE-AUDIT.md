---
milestone: v1.1 ASR Ensemble
audited: 2026-02-04T03:00:00Z
status: passed
scores:
  requirements: 32/32
  phases: 8/8
  integration: 26/26
  flows: 4/4
gaps:
  requirements: []
  integration: []
  flows: []
tech_debt:
  - phase: 15-safety-checks
    items:
      - "ROADMAP spec drift: Implementation uses split thresholds (7 in-ref, 3 not-in-ref) instead of unified >5 — intentional design improvement"
      - "ROADMAP spec drift: Implementation uses conf >= 0.93 instead of >= 0.9 for corroboration override — intentional, more conservative"
---

# v1.1 ASR Ensemble Milestone Audit

**Audited:** 2026-02-04T03:00:00Z
**Status:** PASSED
**Overall Score:** 100% (all requirements satisfied, all phases verified, integration complete)

## Executive Summary

The v1.1 ASR Ensemble milestone is **complete**. All 32 requirements are satisfied across 8 phases (10-17). Cross-phase integration verified with 26 exports properly connected. All 4 E2E user flows complete without breaks.

Phase 17 (Integration Bug Fixes) closed the 2 critical integration gaps identified in the initial audit:
1. Tooltip property mismatch fixed (`_debug.latestLong` reference corrected)
2. Severity propagation to alignment items added for WCPM range

---

## Scores

| Category | Score | Details |
|----------|-------|---------|
| Requirements | 32/32 | All v1.1 requirements satisfied |
| Phase Verifications | 8/8 | All phases verified as passed |
| Cross-Phase Integration | 26/26 | All exports have active consumers |
| E2E Flows | 4/4 | All user journeys complete |

---

## Phase Summary

| Phase | Plans | Status | Date | Critical Findings |
|-------|-------|--------|------|-------------------|
| 10. Configuration | 1/1 | PASSED | 2026-02-03 | None |
| 11. Ensemble Core | 3/3 | PASSED | 2026-02-03 | None |
| 12. VAD Integration | 4/4 | PASSED | 2026-02-03 | None |
| 13. Confidence Classification | 3/3 | PASSED | 2026-02-03 | None |
| 14. Disfluency Detection | 3/3 | PASSED | 2026-02-04 | None |
| 15. Safety Checks | 3/3 | PASSED | 2026-02-04 | Spec drift (better impl) |
| 16. UI Enhancements | 4/4 | PASSED | 2026-02-04 | None |
| 17. Integration Bug Fixes | 1/1 | PASSED | 2026-02-04 | Closed 2 gaps |

**Total Plans:** 22/22 complete

---

## Requirements Coverage

All 32 v1.1 requirements satisfied:

### Ensemble Core (4/4)
- [x] ENS-01: Parallel model calls
- [x] ENS-02: Temporal word association
- [x] ENS-03: 50ms jitter buffer
- [x] ENS-04: _debug data preserved

### Confidence Classification (4/4)
- [x] CONF-01: Asymmetric trust policy
- [x] CONF-02: Trust latest_only words in reference
- [x] CONF-03: Distrust latest_only words not in reference
- [x] CONF-04: Research-backed thresholds (0.93/0.70)

### VAD Integration (7/7)
- [x] VAD-01: Browser-based Silero VAD
- [x] VAD-02: Post-process on completed audio
- [x] VAD-03: Ghost detection for latest_only + in-ref
- [x] VAD-04: vad_ghost_in_reference flag
- [x] VAD-05: 2-second calibration
- [x] VAD-06: Noise-based threshold (0.15-0.60)
- [x] VAD-07: Settings UI with calibrate button

### Disfluency Detection (5/5)
- [x] DIS-01: Separate stutter metrics
- [x] DIS-02: Severity classification (none/minor/moderate/significant)
- [x] DIS-03: Significant thresholds (0.5s pause, 2.0s duration)
- [x] DIS-04: Fragment merging (<=3 chars, <=2s gap)
- [x] DIS-05: Independence from confidence

### Safety Checks (4/4)
- [x] SAFE-01: Rate anomaly detection (>5 words/sec)
- [x] SAFE-02: Uncorroborated sequence flagging (7+ in-ref, 3+ not-in-ref)
- [x] SAFE-03: Multi-flag _flags array
- [x] SAFE-04: Strong corroboration override (0.93 threshold)

### UI Enhancements (7/7)
- [x] UI-01: Word hover tooltip with both models
- [x] UI-02: Disfluency badges
- [x] UI-03: WCPM range display
- [x] UI-04: Fluency concerns summary
- [x] UI-05: Rate anomaly indicators
- [x] UI-06: VAD calibration UI
- [x] CFG-04: Dev mode with manual slider

### Configuration (3/3)
- [x] CFG-01: latest_long boost reduced to 3
- [x] CFG-02: Tiered boosting (proper nouns 5, uncommon 3, common 0)
- [x] CFG-03: default model uses lower boost (3, 2)

---

## Integration Verification

### Cross-Phase Wiring (26/26 exports connected)

| Module | Exports | Consumers | Status |
|--------|---------|-----------|--------|
| stt-api.js | getDefaultModelConfig, sendEnsembleSTT | app.js | ✓ WIRED |
| ensemble-merger.js | mergeEnsembleResults, extractWordsFromSTT, computeEnsembleStats | app.js | ✓ WIRED |
| vad-processor.js | vadProcessor | app.js, ghost-detector.js | ✓ WIRED |
| ghost-detector.js | flagGhostWords | app.js | ✓ WIRED |
| confidence-classifier.js | classifyAllWords, filterGhosts, buildReferenceSet | app.js, safety-checker.js | ✓ WIRED |
| disfluency-detector.js | detectDisfluencies | app.js | ✓ WIRED |
| safety-checker.js | applySafetyChecks | app.js | ✓ WIRED |
| metrics.js | computeWCPMRange | app.js | ✓ WIRED |
| ui.js | displayAlignmentResults | app.js | ✓ WIRED |

**Orphaned exports:** 0
**Missing connections:** 0

### Critical Data Flow (Verified End-to-End)

```
audioBlob
  → ensembleResult {latestLong, default}
  → mergedWords [{source, _debug}]
  → ghostFlagged [{vad_ghost_in_reference}]
  → classifiedWords [{trustLevel, confidence, _flags}]
  → filteredWords (ghosts removed)
  → disfluencyWords [{severity, attempts, _disfluency}]
  → safetyWords [{_safety flags}]
  → alignment [{ref, hyp, type, severity}]
  → wcpm {wcpmMin, wcpmMax}
  → UI display (tooltips, badges, collapse banner, WCPM range)
```

---

## E2E Flow Verification

### Flow 1: Assessment Flow - COMPLETE

| Step | Status |
|------|--------|
| Record audio | ✓ OK |
| Ensemble STT | ✓ OK |
| Merge results | ✓ OK |
| VAD processing | ✓ OK |
| Ghost detection | ✓ OK |
| Confidence classification | ✓ OK |
| Filter ghosts | ✓ OK |
| Disfluency detection | ✓ OK |
| Safety checks | ✓ OK |
| Alignment | ✓ OK |
| Severity propagation | ✓ OK (Phase 17 fix) |
| WCPM range calculation | ✓ OK |
| Display | ✓ OK |

### Flow 2: Teacher Review Flow - COMPLETE

| Step | Status |
|------|--------|
| View assessment | ✓ OK |
| Hover word | ✓ OK |
| See ensemble tooltip | ✓ OK (Phase 17 fix) |
| See disfluency badge | ✓ OK |
| See rate anomaly underline | ✓ OK |
| See collapse banner | ✓ OK |

### Flow 3: VAD Calibration Flow - COMPLETE

| Step | Status |
|------|--------|
| Click calibrate | ✓ OK |
| Record 2s noise | ✓ OK |
| Analyze noise level | ✓ OK |
| Set threshold | ✓ OK |
| Display status | ✓ OK |
| Persist settings | ✓ OK |

### Flow 4: Dev Mode Flow - COMPLETE

| Step | Status |
|------|--------|
| Toggle dev mode | ✓ OK |
| Show VAD slider | ✓ OK |
| Hide VAD slider | ✓ OK |
| Persist preference | ✓ OK |

---

## Phase 17 Gap Closure (Verified)

Phase 17 successfully closed the 2 critical integration gaps identified in the initial audit:

### Gap 1: Tooltip Property Mismatch - FIXED

**Original Issue:** ui.js:139 referenced `_debug.latest` (doesn't exist)
**Fix:** Changed to `_debug.latestLong` (matches ensemble-merger.js:62)
**Commit:** 3a93ee7
**Status:** ✓ VERIFIED

### Gap 2: Severity Propagation - FIXED

**Original Issue:** Alignment items lacked severity, WCPM range always showed equal min/max
**Fix:** Added propagation loop in app.js:393-401 to copy severity from transcriptWords to alignment items
**Commit:** 43df389
**Status:** ✓ VERIFIED

---

## Tech Debt

### Phase 15: Specification Drift (Non-Blocking)

Phase 15 implementation uses **better** thresholds than ROADMAP specified:

| Item | ROADMAP Spec | Implementation | Verdict |
|------|--------------|----------------|---------|
| Uncorroborated threshold | >5 consecutive | 7+ in-ref, 3+ not-in-ref | Better design |
| Corroboration conf | >= 0.9 | >= 0.93 | More conservative |

**Recommendation:** Update ROADMAP to match implementation (documentation cleanup, not a bug).

**Total Tech Debt:** 2 documentation items (no code issues)

---

## Conclusion

**v1.1 ASR Ensemble milestone PASSED.**

- 32/32 requirements satisfied
- 8/8 phases verified passing
- 26/26 exports properly connected
- 4/4 E2E flows complete
- 0 critical gaps remaining
- 2 documentation drift items (non-blocking)

The milestone is ready for completion and deployment.

---

*Initial audit: 2026-02-04T02:15:00Z (gaps_found)*
*Gap closure phase (17) completed: 2026-02-04T02:17:16Z*
*Final audit: 2026-02-04T03:00:00Z (passed)*
*Auditor: Claude (gsd-audit-milestone orchestrator + gsd-integration-checker)*
