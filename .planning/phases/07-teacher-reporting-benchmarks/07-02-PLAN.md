---
phase: 07-teacher-reporting-benchmarks
plan: 02
type: execute
wave: 2
depends_on: ["07-01"]
files_modified:
  - dashboard.html
autonomous: true

must_haves:
  truths:
    - "Dashboard shows benchmark status indicator (on-track/some-risk/at-risk) for the selected student"
    - "Teacher can set/change student grade from the dashboard"
    - "Benchmark bar visualizes student WCPM relative to grade-level percentiles"
    - "Generate Report button exists and opens report.html in new window"
  artifacts:
    - path: "dashboard.html"
      provides: "Grade selector, benchmark indicator, report button"
      contains: "getBenchmarkStatus"
  key_links:
    - from: "dashboard.html"
      to: "js/benchmarks.js"
      via: "import getBenchmarkStatus, getSeason, HT_NORMS"
      pattern: "import.*benchmarks"
    - from: "dashboard.html"
      to: "report.html"
      via: "window.open for report generation"
      pattern: "window\\.open.*report"
---

<objective>
Add benchmark indicators, grade selector, and "Generate Report" button to the teacher dashboard.

Purpose: Teachers see at-a-glance risk status for their students and can initiate RTI report generation.
Output: Updated dashboard.html with benchmark visualization and report trigger.
</objective>

<execution_context>
@/home/brani/.claude/get-shit-done/workflows/execute-plan.md
@/home/brani/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-teacher-reporting-benchmarks/07-RESEARCH.md
@.planning/phases/07-teacher-reporting-benchmarks/07-01-SUMMARY.md
@dashboard.html
@js/benchmarks.js
@js/storage.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add grade selector and benchmark indicator to dashboard</name>
  <files>dashboard.html</files>
  <action>
In dashboard.html, add these UI elements:

1. **Grade selector** — a `<select>` dropdown near the student info area at the top. Options: "Set Grade" (disabled default), Grade 1-6. When changed, call `updateStudentGrade(studentId, selectedGrade)` from storage.js, then refresh the benchmark display. Pre-select the student's current grade on load.

2. **Benchmark indicator section** — below the student info, above or beside the celeration chart. Shows:
   - A colored horizontal bar with three zones (at-risk red, some-risk amber, on-track green) proportional to the HT norms percentiles
   - A marker showing the student's latest WCPM position on the bar
   - Text label: "{status} ({wcpm} WCPM, 50th %ile = {p50})" in the status color
   - If no grade set: show "Set student grade to see benchmarks"
   - If no assessments: show "Complete an assessment to see benchmarks"
   - Season is auto-detected from the latest assessment date using `getSeason()`

3. **Generate Report button** — a prominent button (e.g., in the dashboard header or student info area). On click:
   - Store the current student ID in `localStorage.setItem('orf_report_student', studentId)`
   - Call `window.open('report.html', '_blank')`

Import `getBenchmarkStatus`, `getSeason`, `HT_NORMS` from `./js/benchmarks.js` and `updateStudentGrade` from `./js/storage.js`.

Style the benchmark bar with inline CSS or a `<style>` block in dashboard.html:
- `.benchmark-bar`: height 24px, display flex, border-radius 4px, overflow hidden, width 100%
- `.benchmark-zone.at-risk`: background #ffcdd2
- `.benchmark-zone.some-risk`: background #fff9c4
- `.benchmark-zone.on-track`: background #c8e6c9
- `.benchmark-marker`: absolute positioned, 3px wide, black, full height
- `.benchmark-label`: font-weight 600, margin-top 4px
  </action>
  <verify>Open dashboard with a student who has grade set and assessments. Confirm benchmark bar renders with correct zone colors and marker position. Change grade via dropdown, confirm bar updates. Click "Generate Report" — confirm report.html opens (will be blank/404 until plan 03, but the window.open call should fire).</verify>
  <done>Dashboard shows benchmark status for graded students, grade is editable, report button opens report page.</done>
</task>

</tasks>

<verification>
1. Dashboard imports from benchmarks.js successfully
2. Grade selector reads/writes student grade
3. Benchmark bar renders with correct risk classification
4. Season auto-detected from latest assessment date
5. "Generate Report" button opens report.html in new window
</verification>

<success_criteria>
- Teacher sees visual benchmark indicator showing student's WCPM vs grade-level norms
- Teacher can set/change grade from dashboard
- Generate Report button triggers report page
</success_criteria>

<output>
After completion, create `.planning/phases/07-teacher-reporting-benchmarks/07-02-SUMMARY.md`
</output>
